<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="utf-8">
<link rel="stylesheet" type="text/css" href="style.css"/>
<link rel="stylesheet" type="text/css" href="accueil.css"/>
     <title>Octopus Blog - Accueil</title>
</head>
<body>
    <header>

        <nav class="menu">
            <ul>
                <li class="menu"><a href="index.html">Accueil</a></li>
                <li class="menu"><a href="formulaire.html">Création d'articles</a></li>
                <li class="menu"><a href="">Liste des articles</a></li> 
                <!-- ATTENTION cette page ne peut pas fonctionner car c'est déjà l'accueil !  -->
            </ul>
        </nav>

        <div id="part2_header">
            <div id = "cadre_titre">
                <h1> octopus blog </h1>
            </div>
        </div>

    </header>


    <div id="container"></div>
            
        <script>
            const url = 'http://localhost/3000/';

            fetch(url)
                .then ((res) => res.json()
                .then ((data) => generateHtml(data)))

                let generateHtml = (data) => {
                    // Je définis mon HTML comme étant vide à l'origine
                    let html =""

// Je créé une boucle qui va incrémenter ma data (donc mon numéro de données) de 1 à chaque tour
                    for(let i= 0; i < data.length; i++ ){
  // Pour éviter que mon HTML se recharge à chaque passe de boucle pour n'afficher que les datas numéro i alors 
  // j'additionne mon html existant au nouveau html que je passe dans la boucle          
  // ici je réappelle ma variable html mais sans mettre le let devant car je ne la définis pas,
  // je lui ajoute seulement une autre valeur !          
                         html += `
                            <div class="article">
                            <h2> ${data[i].title} </h2>
                            <p> Thème <span id="nom_theme"> ${data[i].topic} </span></p>
                            <img class="img_article" src="${data[i].imageUrl}"/>
                            </div>
                        `
                    };
// on va créer une variable qui va aller récupérer notre classe container 
            let articlesDiv = document.querySelector('.container')
// Cette variable est donc stocké et prend en valeur la div container
// on va donc pouvoir retourner cet élement dans la variable html 
            articlesDiv.innerHTML = html
                }
        
        </script>
       
    </div>

    <footer>

        <div id="bloc_logo">
            <a href="https://github.com/manekineko17" target="_blank">
            <img class = "img_logo_github" src="./media/GitHub-bleu.png" alt="logo Github Marine Grouiller"/>
            </a>
            <a href="https://github.com/adelevrc" target="_blank">
            <img class = "img_logo_github" src="./media/GitHub-jaune.png" alt="logo Github Adèle Vercaygne"/>
            </a>
            <a href="https://github.com/aureliem07" target="_blank">
            <img class = "img_logo_github" src="./media/GitHub-orange.png" alt="logo Github Aurélie Maiilot"/>
            </a>
            <a href="https://github.com/Mereani" target="_blank">
            <img class = "img_logo_github" src="./media/GitHub-violet.png" alt="logo Github Mereani Baratte"/>
            </a>
        </div>

    </footer>

    <script type="text/javascript" src="script.js"></script>

</body>
</html>